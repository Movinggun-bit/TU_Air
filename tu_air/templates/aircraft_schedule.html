{% extends "base.html" %}
{% block title %}í•­ê³µê¸° ìƒì„¸ ì¼ì • - ê´€ë¦¬ì{% endblock %}

{% block content %}
<div class="aircraft-schedule-container">
    <div class="aircraft-schedule-header">
        <h1>{{ aircraft.Model }} ìƒì„¸ ì¼ì •</h1>
        <div class="aircraft-info">
            <span class="aircraft-info-item">
                <strong>í•­ê³µê¸° ID:</strong> {{ aircraft.Aircraft_ID }}
            </span>
            <span class="aircraft-info-item">
                <strong>ì œì¡°ì‚¬:</strong> {{ aircraft.Manufacturer }}
            </span>
            <span class="aircraft-info-item">
                <strong>ì¢Œì„ ìˆ˜:</strong> {{ aircraft.Seat_Capacity }}ì„
            </span>
        </div>
    </div>

    {% if schedule %}
    <!-- ì›”ë³„ ì„ íƒ íƒ­ -->
    <div class="month-selector">
        {% for month in schedule.keys()|sort %}
        <button class="month-tab {% if loop.first %}active{% endif %}" 
                data-month="{{ month }}">
            {{ month }}
        </button>
        {% endfor %}
    </div>

    <!-- ì›”ë³„ ì¼ì • ë‚´ìš© -->
    {% for month, days in schedule.items()|sort %}
    <div class="schedule-month-content {% if loop.first %}active{% endif %}" 
         data-month="{{ month }}">
        {% for day, flights in days.items()|sort %}
        <div class="schedule-day-group">
            <div class="schedule-day-header">
                <div class="schedule-day-date">
                    <span>{{ day }}</span>
                    <span class="schedule-day-count">{{ flights|length }}í¸</span>
                </div>
            </div>
            <div class="schedule-day-body">
                <div class="flight-list">
                    {% for flight in flights %}
                    <div class="flight-item">
                        <div class="flight-info">
                            <div class="flight-info-item">
                                <span class="flight-info-label">í¸ëª…</span>
                                <span class="flight-info-value flight-no">{{ flight.Flight_No }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ì¶œë°œì§€</span>
                                <span class="flight-info-value">{{ flight.Departure_Airport_Code }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ë„ì°©ì§€</span>
                                <span class="flight-info-value">{{ flight.Arrival_Airport_Code }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ì¶œë°œ ì‹œê°„</span>
                                <span class="flight-info-value time">{{ flight.Departure_Time.strftime('%H:%M') }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ë„ì°© ì‹œê°„</span>
                                <span class="flight-info-value time">{{ flight.Arrival_Time.strftime('%H:%M') }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ì¶œë°œ ê²Œì´íŠ¸</span>
                                <span class="flight-info-value">{{ flight.Departure_Gate }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ë„ì°© ê²Œì´íŠ¸</span>
                                <span class="flight-info-value">{{ flight.Arrival_Gate }}</span>
                            </div>
                        </div>
                        <span class="flight-status {{ flight.Flight_Status.lower().replace('_', '-') }}">
                            {{ flight.Flight_Status }}
                        </span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
    {% else %}
    <div class="schedule-empty">
        <div class="schedule-empty-icon">ğŸ“…</div>
        <p>í•´ë‹¹ í•­ê³µê¸°ì˜ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    </div>
    {% endif %}

    <a href="{{ url_for('admin.aircraft_selection') }}" class="btn-back">
        â† í•­ê³µê¸° ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°
    </a>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const monthTabs = document.querySelectorAll('.month-tab');
        const monthContents = document.querySelectorAll('.schedule-month-content');

        monthTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const targetMonth = this.getAttribute('data-month');

                // ëª¨ë“  íƒ­ê³¼ ì½˜í…ì¸  ë¹„í™œì„±í™”
                monthTabs.forEach(t => t.classList.remove('active'));
                monthContents.forEach(c => c.classList.remove('active'));

                // ì„ íƒëœ íƒ­ê³¼ ì½˜í…ì¸  í™œì„±í™”
                this.classList.add('active');
                document.querySelector(`.schedule-month-content[data-month="${targetMonth}"]`)
                    .classList.add('active');

                // ì„ íƒëœ ì›”ë¡œ ìŠ¤í¬ë¡¤
                const activeContent = document.querySelector(`.schedule-month-content[data-month="${targetMonth}"]`);
                if (activeContent) {
                    activeContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    });
</script>
{% endblock %}
