{% extends "base.html" %}
{% block title %}{{ staff.Name }} ìƒì„¸ ì¼ì • - ê´€ë¦¬ì{% endblock %}

{% block content %}
<div class="aircraft-schedule-container">
    <div class="aircraft-schedule-header">
        <h1>{{ staff.Name }} ìƒì„¸ ì¼ì •</h1>
        <div class="aircraft-info">
            <span class="aircraft-info-item">
                <strong>ì§ì› ID:</strong> {{ staff.Staff_ID }}
            </span>
            <span class="aircraft-info-item">
                <strong>ì—­í• :</strong> {{ staff.Role }}
            </span>
            <span class="aircraft-info-item">
                <strong>ë¶€ì„œ:</strong> {{ staff.Department }}
            </span>
        </div>
    </div>

    {% if schedule %}
    <!-- ì›”ë³„ ì„ íƒ íƒ­ -->
    <div class="month-selector">
        {% for month in schedule.keys()|sort %}
        <button class="month-tab {% if loop.first %}active{% endif %}" 
                data-month="{{ month }}">
            {{ month }}
        </button>
        {% endfor %}
    </div>

    <!-- ì›”ë³„ ì¼ì • ë‚´ìš© -->
    {% for month, days in schedule.items()|sort %}
    <div class="schedule-month-content {% if loop.first %}active{% endif %}" 
         data-month="{{ month }}">
        {% for day, flights in days.items()|sort %}
        <div class="schedule-day-group">
            <div class="schedule-day-header">
                <div class="schedule-day-date">
                    <span>{{ day }}</span>
                    <span class="schedule-day-count">{{ flights|length }}í¸</span>
                </div>
            </div>
            <div class="schedule-day-body">
                <div class="flight-list">
                    {% for flight in flights %}
                    <div class="flight-item">
                        <div class="flight-info">
                            <div class="flight-info-item">
                                <span class="flight-info-label">í¸ëª…</span>
                                <span class="flight-info-value flight-no">{{ flight.Flight_No }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ì¶œë°œì§€</span>
                                <span class="flight-info-value">{{ flight.Departure_Airport_Code }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ë„ì°©ì§€</span>
                                <span class="flight-info-value">{{ flight.Arrival_Airport_Code }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ì¶œë°œ ì‹œê°„</span>
                                <span class="flight-info-value time">{{ flight.Departure_Time.strftime('%H:%M') }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">ë„ì°© ì‹œê°„</span>
                                <span class="flight-info-value time">{{ flight.Arrival_Time.strftime('%H:%M') }}</span>
                            </div>
                            <div class="flight-info-item">
                                <span class="flight-info-label">í•­ê³µê¸°</span>
                                <span class="flight-info-value">{{ flight.Aircraft_ID }}</span>
                            </div>
                        </div>
                        <span class="flight-status {{ flight.Flight_Status.lower().replace('_', '-') }}">
                            {{ flight.Flight_Status }}
                        </span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
    {% else %}
    <div class="schedule-empty">
        <div class="schedule-empty-icon">ğŸ“…</div>
        <p>í•´ë‹¹ ì§ì›ì˜ ë°°ì •ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    </div>
    {% endif %}

    <a href="javascript:window.history.back();" class="btn-back">
        â† ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
    </a>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const monthTabs = document.querySelectorAll('.month-tab');
        const monthContents = document.querySelectorAll('.schedule-month-content');

        monthTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const targetMonth = this.getAttribute('data-month');

                monthTabs.forEach(t => t.classList.remove('active'));
                monthContents.forEach(c => c.classList.remove('active'));

                this.classList.add('active');
                document.querySelector(`.schedule-month-content[data-month="${targetMonth}"]`).classList.add('active');
            });
        });
    });
</script>
{% endblock %}
