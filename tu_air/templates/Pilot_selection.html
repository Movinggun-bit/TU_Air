{% extends "base.html" %}
{% block title %}{{ title }} ì„ íƒ - ê´€ë¦¬ì{% endblock %}

{% block content %}
<div class="aircraft-selection-container">
    <div class="aircraft-selection-header">
        <h1>{{ title }} ì„ íƒ</h1>
        <p class="aircraft-selection-subtitle">ë°°ì •í•  {{ title }}(ì„)ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
    </div>

    {% if staffs %}
    <section class="aircraft-category">
        <div class="category-header">
            <h2 class="category-title">
                <span class="category-icon">ğŸ‘¤</span>
                {{ title }} ëª©ë¡
                <span class="category-badge">{{ staffs|length }}ëª…</span>
            </h2>
        </div>
        <div class="aircraft-grid">
            {% for staff in staffs %}
            <div class="aircraft-card">
                <div class="aircraft-card-header">
                    <h3 class="aircraft-model">{{ staff.Name }}</h3>
                    <span class="aircraft-id">ID: {{ staff.Staff_ID }}</span>
                </div>
                <div class="aircraft-card-body">
                    <div class="aircraft-info-item">
                        <span class="info-label">ë¶€ì„œ</span>
                        <span class="info-value">{{ staff.Department }}</span>
                    </div>
                    <div class="aircraft-info-item">
                        <span class="info-label">ì—­í• </span>
                        <span class="info-value highlight">{{ staff.Role }}</span>
                    </div>
                </div>
                <div class="aircraft-card-footer">
                    <button class="btn-aircraft-select" onclick="selectStaff('{{ staff.Staff_ID }}', '{{ staff.Name }}')">
                        ì„ íƒ
                    </button>
                    <a href="{{ url_for('admin.staff_schedule', staff_id=staff.Staff_ID) }}" class="btn-aircraft-details">
                        ì¼ì • ë³´ê¸°
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% else %}
    <div class="aircraft-empty-state">
        <p>ë“±ë¡ëœ {{ title }}ì´(ê°€) ì—†ìŠµë‹ˆë‹¤.</p>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
    function selectStaff(staffId, staffName) {
        const target = "{{ target }}";
        if (!target) {
            alert("ì˜¤ë¥˜: ëŒ€ìƒ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return;
        }
        
        const selection = {
            target: target,
            id: staffId,
            name: `(${staffName})`
        };
        sessionStorage.setItem('staff_selection', JSON.stringify(selection));
        
        window.location.href = "{{ url_for('admin.schedule_dashboard') }}";
    }
</script>
{% endblock %}
